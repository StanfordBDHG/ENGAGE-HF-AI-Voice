{
    "type": "realtime",
    "model": "gpt-realtime",
    "instructions": "{{SYSTEM_PROMPT}}",
    "audio": {
        "input": {
            "format": {
                "type": "audio/pcmu"
            },
            "turn_detection": {
                "type": "semantic_vad",
                "eagerness": "high"
            },
            "noise_reduction": {
                "type": "far_field"
            }
        },
        "output": {
            "format": {
                "type": "audio/pcmu"
            },
            "voice": "alloy",
            "speed": 1.0
        }
    },
    "tools": [
        {
            "type": "function",
            "name": "save_response",
            "description": "Saves a patient response and returns the next question. This function should be called after a response is recorded to save it. Calling this function multiple times for the same linkId will override the answer value.",
            "parameters": {
                "type": "object",
                "properties": {
                    "linkId": {
                        "type": "string",
                        "description": "The question's linkId"
                    },
                    "answer": {
                        "anyOf": [
                            { "type": "string" },
                            { "type": "number" },
                            { "type": "null" }
                        ],
                        "description": "The patient's answer. If the patient is allowed to skip the question, a `null` answer can be used to indicate a skipped question."
                    }
                },
                "required": [
                    "linkId",
                    "answer"
                ],
                "additionalProperties": false
            }
        }
    ],
    "tool_choice": "auto"
}
