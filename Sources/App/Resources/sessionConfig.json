{
    "type": "session.update",
    "event_id": "{{EVENT_ID}}",
    "session": {
        "modalities": [
            "text",
            "audio"
        ],
        "instructions": "{{SYSTEM_PROMPT}}",
        "voice": "alloy",
        "output_audio_format": "g711_ulaw",
        "input_audio_format": "g711_ulaw",
        "turn_detection": {
            "type": "server_vad"
        },
        "tools": [
            {
                "type": "function",
                "name": "get_vitalSign_question",
                "description": "Retrieves the next question and current progress from the vital signs survey. This function should be called repeatedly to get each question one at a time. When no more questions are available, it will return a message indicating that the survey is complete.",
                "parameters": {
                    "type": "object",
                    "properties": {}
                }
            },
            {
                "type": "function",
                "name": "save_vitalSign_response",
                "description": "Saves a patient response of the vital signs survey. This function should be called after a response is recorded to save it.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "linkId": {
                            "type": "string",
                            "description": "The vital signs question's linkId"
                        },
                        "answer": {
                            "type": "number",
                            "description": "The patient's answer."
                        }
                    },
                    "required": [
                        "linkId",
                        "answer"
                    ],
                    "additionalProperties": false
                }
            },
            {
                "type": "function",
                "name": "count_answered_vitalSign_questions",
                "description": "Counts the number of vital signs questions that have already been answered.",
                "parameters": {}
            },
            {
                "type": "function",
                "name": "get_kccq12_question",
                "description": "Retrieves the next question and current progress from the KCCQ-12 survey. This function should be called repeatedly to get each question one at a time. When no more questions are available, it will return a message indicating that the survey is complete.",
                "parameters": {
                    "type": "object",
                    "properties": {}
                }
            },
            {
                "type": "function",
                "name": "save_kccq12_response",
                "description": "Saves a patient response of the KCCQ-12 heart failure quality of life survey. This function should be called after a response is recorded to save it.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "linkId": {
                            "type": "string",
                            "description": "The KCCQ-12 question's linkId"
                        },
                        "code": {
                            "type": "string",
                            "description": "The KCCQ-12 question's corresponding answer code."
                        }
                    },
                    "required": [
                        "linkId",
                        "code"
                    ],
                    "additionalProperties": false
                }
            }, 
            {
                "type": "function",
                "name": "count_answered_kccq12_questions",
                "description": "Counts the number of KCCQ-12 questions that have already been answered.",
                "parameters": {}
            },
            {
                "type": "function",
                "name": "get_q17_question",
                "description": "Retrieves the next question and current progress from the Q17 survey. This function should be called repeatedly to get each question one at a time. When no more questions are available, it will return a message indicating that the survey is complete.",
                "parameters": {
                    "type": "object",
                    "properties": {}
                }
            },
            {
                "type": "function",
                "name": "save_q17_response",
                "description": "Saves a patient response of the Q17 survey. This function should be called after a response is recorded to save it.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "linkId": {
                            "type": "string",
                            "description": "The Q17 question's linkId"
                        },
                        "code": {
                            "type": "string",
                            "description": "The Q17 question's corresponding answer code."
                        }
                    },
                    "required": [
                        "linkId",
                        "code"
                    ],
                    "additionalProperties": false
                }
            },
            {
                "type": "function",
                "name": "count_answered_q17_questions",
                "description": "Counts the number of Q17 questions that have already been answered.",
                "parameters": {}
            }
        ],
        "tool_choice": "auto"
    }
}
